<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Crypto Kit – USDT only</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <main class="card">
    <h1>Launch a USDT-payable landing page in 15 minutes</h1>
    <p>Template + checkout + zip. Copy. Paste. Collect crypto.</p>
    <label class="bump">
      <input type="checkbox" id="bump" onchange="togglePrice()">
      <span class="switch"></span>
      Add AI Audit PDF (+149 USDT)
    </label>
    <button id="buyBtn" onclick="buy()">Get Kit – <span id="price">199</span> USDT</button>
    <p class="scar">Slots left: <span id="slots">7</span></p>
  </main>
  <script>
    function togglePrice(){
      const p = document.getElementById('bump').checked ? 348 : 199;
      document.getElementById('price').textContent = p;
    }
    async function buy(){
  const btn = document.getElementById('buyBtn');
  const price = parseInt(document.getElementById('price').textContent);
  btn.disabled = true;                       // lock while working
  try{
    const res = await fetch('https://usdt-kit-api.onrender.com/create-invoice', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({price})
    });
    const data = await res.json();
    if(data.pay_url) window.location.href = data.pay_url;  // go to checkout
    else alert('Server error – please refresh.');
  }catch(err){
    console.error(err);
    alert('Network error – please refresh.');
  }finally{
    btn.disabled = false;                    // unlock no matter what
  }
}
  </script>
</body>
</html>
